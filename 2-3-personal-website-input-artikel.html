<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Panel Admin - Buat Artikel Baru</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- TinyMCE Rich Text Editor with a valid API key -->
    <!-- <script
      src="https://cdn.tiny.cloud/1/sfluln68tj5xxq946tt82301kmxwtei2ztp3fmwrklh9ecpc/tinymce/8/tinymce.min.js"
      referrerpolicy="origin"
    ></script> -->
    <script
      src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js"
      referrerpolicy="origin"
    ></script>

    <!-- Google Fonts (agar konsisten) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      /* Menggunakan beberapa variabel dari tema utama untuk konsistensi */
      :root {
        --bg-light: #fdfaf5;
        --border-light: #e0d9d1;
        --text-light: #3d3d3d;
        --accent-light: #8c7a6b;
      }
      .font-serif {
        font-family: "Lora", serif;
      }
      .font-sans {
        font-family: "Inter", sans-serif;
      }
      body {
        font-family: "Inter", sans-serif;
        background-color: #f7f7f7; /* Latar belakang netral untuk admin */
        color: var(--text-light);
      }
      .form-input {
        border: 1px solid var(--border-light);
        background-color: var(--bg-light);
        padding: 0.75rem 1rem;
        border-radius: 0.25rem;
        width: 100%;
        transition: border-color 0.2s;
      }
      .form-input:focus {
        outline: none;
        border-color: var(--accent-light);
        box-shadow: 0 0 0 2px rgba(140, 122, 107, 0.2);
      }
      .btn-publish {
        background-color: var(--accent-light);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 0.25rem;
        font-weight: 600;
        transition: background-color 0.2s;
      }
      .btn-publish:hover {
        background-color: #7a6a5b;
      }
    </style>
  </head>
  <body class="antialiased">
    <div class="min-h-screen flex flex-col">
      <!-- Header Panel Admin -->
      <header
        class="bg-white shadow-sm w-full"
        style="border-bottom: 1px solid var(--border-light)"
      >
        <div class="max-w-5xl mx-auto px-6 py-4">
          <h1 class="text-2xl font-serif font-bold">Admin Panel</h1>
          <p class="text-sm" style="color: var(--accent-light)">
            Buat & Kelola Konten
          </p>
        </div>
      </header>

      <!-- Main Content -->
      <main class="flex-grow max-w-5xl w-full mx-auto px-6 py-8">
        <h2 class="text-3xl font-serif font-bold mb-8">Buat Artikel Baru</h2>

        <form id="article-form" class="space-y-6">
          <!-- Judul Artikel -->
          <div>
            <label
              for="title"
              class="block text-lg font-serif font-semibold mb-2"
              >Judul Artikel</label
            >
            <input
              type="text"
              id="title"
              name="title"
              class="form-input text-lg"
              placeholder="Tulis judul yang menarik..."
              required
            />
          </div>

          <!-- Konten Artikel -->
          <div>
            <label
              for="content"
              class="block text-lg font-serif font-semibold mb-2"
              >Konten</label
            >
            <textarea id="content" name="content"></textarea>
          </div>

          <!-- Gambar Utama -->
          <div>
            <label
              for="featured-image"
              class="block text-lg font-serif font-semibold mb-2"
              >URL Gambar Utama</label
            >
            <input
              type="url"
              id="featured-image"
              name="featured-image"
              class="form-input"
              placeholder="https://example.com/gambar.jpg"
              required
            />
          </div>

          <!-- Tombol Publish -->
          <div class="text-right pt-4">
            <button type="submit" class="btn-publish">
              Publikasikan Artikel
            </button>
          </div>
        </form>
      </main>
    </div>

    <script>
      // Inisialisasi TinyMCE
      tinymce.init({
        selector: "textarea#content",
        plugins:
          "preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",
        menubar: "file edit view insert format tools table help",
        toolbar:
          "undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media link anchor codesample | ltr rtl",
        height: 500,
        autosave_ask_before_unload: true,
        autosave_interval: "30s",
        autosave_prefix: "{path}{query}-{id}-",
        autosave_restore_when_empty: false,
        autosave_retention: "2m",
        image_advtab: true,
        // Konfigurasi ini memungkinkan Anda menempel gambar langsung ke editor
        paste_data_images: true,
        setup: function (editor) {
          // Memberi placeholder awal
          editor.on("init", function () {
            const content = editor.getContent();
            if (content === "") {
              editor.setContent(
                '<p style="color: #999;">Mulai tulis ceritamu di sini...</p>'
              );
            }
          });
          editor.on("focus", function () {
            const content = editor.getContent({ format: "text" });
            if (content === "Mulai tulis ceritamu di sini...") {
              editor.setContent("");
            }
          });
        },
      });
      // Simulasi pengiriman data ke server
      document
        .getElementById("article-form")
        .addEventListener("submit", function (event) {
          event.preventDefault(); // Mencegah form untuk refresh halaman

          const title = document.getElementById("title").value;
          const content = tinymce.get("content").getContent(); // Mengambil konten dari TinyMCE
          const imageUrl = document.getElementById("featured-image").value;

          if (!title || !content || !imageUrl) {
            alert("Harap isi semua kolom!");
            return;
          }

          // Data yang akan dikirim ke backend/server
          const articleData = {
            title: title,
            content: content,
            featuredImage: imageUrl,
            publishedDate: new Date().toISOString(),
          };

          // Menampilkan data dalam bentuk JSON di console
          // Di aplikasi nyata, Anda akan mengirim ini menggunakan fetch() ke API server Anda
          console.log("--- DATA ARTIKEL SIAP DIKIRIM ---");
          console.log(JSON.stringify(articleData, null, 2));

          alert(
            'Artikel berhasil "dipublikasikan"! Cek console log (F12) untuk melihat data yang dikirim.'
          );

          // Mengosongkan form setelah submit
          document.getElementById("article-form").reset();
          tinymce.get("content").setContent("");
        });
    </script>
  </body>
</html>
